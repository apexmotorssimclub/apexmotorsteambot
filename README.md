# Roadmap (Шаг 1–3/5)

Цель: минимальный ТГ-бот, который отвечает на `/start` и принимает свободный текст (без OpenAI, без публикации).

## Что сделано на шаге 1
- Инициализирован чистый проект (оставлен только `.env`).
- Добавлены базовые зависимости (`aiogram`, `python-dotenv`, `dateparser`, `requests`).
- Создан минимальный бот `bot.py` с командами `/start`, `/help` и приёмом произвольного текста.

## Как запустить
1. Установить зависимости:
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   python -m pip install -r requirements.txt
   ```
2. Заполнить `.env` (минимум):
   ```env
   TELEGRAM_BOT_TOKEN=xxx
   ```
3. Запустить бота:
   ```bash
   source .venv/bin/activate
   python bot.py
   ```

## Проверка
- Откройте диалог с ботом → `/start` → отправьте любое сообщение. Бот отвечает eco-сообщением.

## Шаг 2 — Генерация поста (OpenAI)
- Добавлен `openai_client.py` и обновлён `bot.py` для генерации постов из свободного текста.
- Переменные окружения: `OPENAI_API_KEY`, `OPENAI_MODEL` (например, `gpt-4o-mini` или `gpt-4`), `OPENAI_TEMPERATURE`.

Проверка:
1. Запустите бота.
2. Отправьте произвольный промпт — получите сгенерированный пост.

## Шаг 3 — Кнопки, перегенерация, правки, медиа
- В `bot.py` добавлены состояния и клавиатуры: Перегенерировать (стили), Редактировать, Прикрепить медиа, Опубликовать (заглушка), Отменить.
- Медиа: фото/видео/аудио/voice — сохраняются как file_id (до 3).
- Публикация пока заглушена; будет включена на шаге 5.

Проверка:
1. Напишите текст — получите пост с клавиатурой.
2. Нажмите «Перегенерировать» → выберите стиль → получите новый пост.
3. Нажмите «Редактировать» → отправьте новый текст → пост обновится.
4. Нажмите «Прикрепить медиа» → отправьте фото/видео/аудио → получите подтверждение.
5. «Опубликовать» — публикует в чат/канал, указанный в `TELEGRAM_CHANNEL_ID` (бот должен быть админом).

## Шаг 4 — Дата/время
- Автоматически распознаём "сегодня/завтра/в 18:00/в субботу" и др. (ru), игнорируем длительность вроде "2.4 часа".
- Добавляем нормализованное время в подсказку для модели в виде `[Дата/время]: 10 августа 2025, 18:00 МСК`.

Проверка:
1. Отправьте текст с «Завтра в 18:00 …» — в посте будет упоминание о завтрашнем событии как об анонсе.
2. Перегенерация по стилям также учитывает нормализованную дату/время.

